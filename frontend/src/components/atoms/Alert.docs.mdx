import { Meta, Story, ArgsTable, Canvas, Primary } from '@storybook/blocks';
import * as AlertStories from './Alert.stories';
import { Alert } from './Alert';
import { Button } from '@mui/material';
import { Replay as ReplayIcon, Delete as DeleteIcon } from '@mui/icons-material'; // Para el ejemplo

<Meta of={AlertStories} />

# Alert

El componente `Alert` se utiliza para mostrar mensajes importantes e informativos al usuario, relacionados con el estado de la aplicación, errores, advertencias o confirmaciones de éxito.
Ha sido mejorado para ofrecer una estética más moderna, soporte para modos claro y oscuro, y la capacidad de incluir acciones personalizadas.

<Primary /> {/* Muestra la primera historia definida en Alert.stories.tsx (Info) */}

## Características Principales

*   **Severidades:** Soporta `error`, `warning`, `info`, y `success`. Cada una con un icono y color distintivo.
*   **Variantes:** `standard` (defecto mejorado), `filled` (fondo sólido), y `outlined` (con borde).
*   **Título y Mensaje:** Permite un título opcional en negrita además del mensaje principal.
*   **Cerrable:** Puede incluir un botón de cierre (`X`) si se provee la función `onClose`.
*   **Icono:** Muestra un icono de severidad por defecto, que puede ocultarse con la prop `hideIcon={true}`.
*   **Tamaños:** Disponible en `medium` (defecto) y `small` (más compacto).
*   **Auto-Cierre:** Puede cerrarse automáticamente después de un `autoHideDuration` (en milisegundos), siempre que `onClose` esté definido.
*   **Acciones Personalizadas:** Permite añadir `ReactNode` (generalmente uno o más componentes `<Button />`) mediante la prop `actions`.
*   **Theming Claro/Oscuro:** Se adapta automáticamente a las preferencias de modo claro/oscuro del sistema del usuario, gracias a la integración con el `ThemeProvider` de la aplicación.
*   **Estilos Personalizables:** Acepta la prop `sx` para overrides de estilo puntuales.

## Tabla de Props

<ArgsTable of={Alert} />

## Ejemplos de Uso

### Severidades (Variante Standard)
La variante `standard` es la predeterminada y ha sido estilizada para una apariencia moderna y limpia.

<Canvas>
  <Story of={AlertStories.Info} />
  <Story of={AlertStories.Success} />
  <Story of={AlertStories.Warning} />
  <Story of={AlertStories.Error} />
</Canvas>

### Otras Variantes de Estilo

<Canvas>
  <Story of={AlertStories.FilledInfo} />
  <Story of={AlertStories.OutlinedInfo} />
</Canvas>

### Funcionalidades Comunes

<Canvas>
  <Story of={AlertStories.WithTitle} />
  <Story of={AlertStories.Closable} />
  <Story of={AlertStories.WithoutIcon} />
  <Story of={AlertStories.AutoHide} />
</Canvas>

### Tamaños

El tamaño `small` es ideal para espacios compactos o información menos intrusiva.

<Canvas>
  <Story of={AlertStories.SmallSize} />
  <Story of={AlertStories.SmallWithAction} />
</Canvas>

### Con Acciones Personalizadas

La prop `actions` es una de las mejoras clave, permitiendo integrar interactividad directamente en la alerta.

**Ejemplo con una acción:**
```tsx
import { Alert } from './Alert'; // Asumiendo la ruta correcta
import { Button } from '@mui/material';
import { Delete as DeleteIcon } from '@mui/icons-material';

<Alert
  severity="warning"
  title="Confirmación Requerida"
  actions={
    <Button
      color="inherit"
      size="small"
      startIcon={<DeleteIcon fontSize="inherit"/>}
      onClick={() => console.log('Eliminar presionado')}
    >
      Eliminar
    </Button>
  }
>
  ¿Está seguro de que desea eliminar este elemento permanentemente?
</Alert>
```

<Canvas>
  <Story of={AlertStories.WithSingleAction} />
</Canvas>

**Ejemplo con múltiples acciones y botón de cierre:**
```tsx
import { Alert } from './Alert';
import { Button } from '@mui/material';
import { Replay as ReplayIcon } from '@mui/icons-material';

<Alert
  severity="error"
  title="Error de Conexión"
  onClose={() => console.log('Alerta cerrada')} // Habilita el botón de cierre
  actions={
    <>
      <Button
        color="inherit"
        size="small"
        onClick={() => console.log('Ignorar presionado')}
      >
        Ignorar
      </Button>
      <Button
        color="inherit"
        size="small"
        startIcon={<ReplayIcon fontSize="inherit"/>}
        onClick={() => console.log('Reintentar presionado')}
      >
        Reintentar
      </Button>
    </>
  }
>
  No se pudo conectar al servidor. Verifique su conexión e intente de nuevo.
</Alert>
```
<Canvas>
  <Story of={AlertStories.WithMultipleActions} />
  <Story of={AlertStories.WithActionAndClose} />
  <Story of={AlertStories.SmallWithMultipleActions} />
</Canvas>

## Theming (Modo Claro/Oscuro)

El componente `Alert` y todas sus variantes están diseñados para funcionar correctamente tanto en modo claro como en modo oscuro. Esta adaptación es automática y se basa en la configuración del tema global de la aplicación, que por defecto sigue las preferencias del sistema operativo del usuario (`prefers-color-scheme`).

Para observar este comportamiento en Storybook:
1.  Cambie la configuración de apariencia de su sistema operativo (Claro/Oscuro).
2.  O, utilice las herramientas de desarrollo de su navegador para emular la preferencia `prefers-color-scheme`.
3.  Si su instancia de Storybook está configurada con un addon específico para cambio de tema (como `storybook-dark-mode` o similar), puede usarlo también.

Los colores de fondo, texto, iconos y bordes se ajustarán para mantener la legibilidad y la coherencia visual en ambos modos.
